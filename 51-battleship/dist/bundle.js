(()=>{"use strict";var n={244:(n,e,t)=>{t.d(e,{A:()=>s});var r=t(441),o=t.n(r),a=t(359),i=t.n(a)()(o());i.push([n.id,".board {\n  width: min(40%, 700px);\n  aspect-ratio: 1/1;\n  display: grid;\n  grid-template-columns: repeat(10, 1fr);\n  grid-template-rows: repeat(10, 1fr);\n  gap: 8px;\n}\n\n.board__banner {\n  font-size: 3rem;\n  margin-bottom: 20px;\n  margin-top: -40px;\n}\n\n.board__cell {\n  background-color: var(--panel-color);\n  position: relative;\n}\n\n.board__cell.selectable {\n  cursor: pointer;\n}\n\n.board__cell.ship {\n  background-color: var(--grid-ship-color);\n}\n\n.board__cell.miss {\n  background-color: var(--grid-miss-color);\n}\n\n.board__cell.hit {\n  background-color: var(--grid-hit-color);\n}\n\n.board__cell.sunk {\n  background-color: var(--grid-sunk-color);\n}\n\n.board__left-connection {\n  width: 8px;\n  height: 10px;\n  background-color: white;\n  position: absolute;\n  top: calc(50% - 5px);\n  left: -8px;\n}\n\n.board__up-connection {\n  width: 10px;\n  height: 8px;\n  background-color: white;\n  position: absolute;\n  top: -8px;\n  left: calc(50% - 5px);\n}\n\n.board__cell.sunk .board__left-connection,\n.board__cell.sunk .board__up-connection {\n  background-color: var(--grid-sunk-color);\n}\n","",{version:3,sources:["webpack://./src/style/board.css"],names:[],mappings:"AAAA;EACE,sBAAsB;EACtB,iBAAiB;EACjB,aAAa;EACb,sCAAsC;EACtC,mCAAmC;EACnC,QAAQ;AACV;;AAEA;EACE,eAAe;EACf,mBAAmB;EACnB,iBAAiB;AACnB;;AAEA;EACE,oCAAoC;EACpC,kBAAkB;AACpB;;AAEA;EACE,eAAe;AACjB;;AAEA;EACE,wCAAwC;AAC1C;;AAEA;EACE,wCAAwC;AAC1C;;AAEA;EACE,uCAAuC;AACzC;;AAEA;EACE,wCAAwC;AAC1C;;AAEA;EACE,UAAU;EACV,YAAY;EACZ,uBAAuB;EACvB,kBAAkB;EAClB,oBAAoB;EACpB,UAAU;AACZ;;AAEA;EACE,WAAW;EACX,WAAW;EACX,uBAAuB;EACvB,kBAAkB;EAClB,SAAS;EACT,qBAAqB;AACvB;;AAEA;;EAEE,wCAAwC;AAC1C",sourcesContent:[".board {\n  width: min(40%, 700px);\n  aspect-ratio: 1/1;\n  display: grid;\n  grid-template-columns: repeat(10, 1fr);\n  grid-template-rows: repeat(10, 1fr);\n  gap: 8px;\n}\n\n.board__banner {\n  font-size: 3rem;\n  margin-bottom: 20px;\n  margin-top: -40px;\n}\n\n.board__cell {\n  background-color: var(--panel-color);\n  position: relative;\n}\n\n.board__cell.selectable {\n  cursor: pointer;\n}\n\n.board__cell.ship {\n  background-color: var(--grid-ship-color);\n}\n\n.board__cell.miss {\n  background-color: var(--grid-miss-color);\n}\n\n.board__cell.hit {\n  background-color: var(--grid-hit-color);\n}\n\n.board__cell.sunk {\n  background-color: var(--grid-sunk-color);\n}\n\n.board__left-connection {\n  width: 8px;\n  height: 10px;\n  background-color: white;\n  position: absolute;\n  top: calc(50% - 5px);\n  left: -8px;\n}\n\n.board__up-connection {\n  width: 10px;\n  height: 8px;\n  background-color: white;\n  position: absolute;\n  top: -8px;\n  left: calc(50% - 5px);\n}\n\n.board__cell.sunk .board__left-connection,\n.board__cell.sunk .board__up-connection {\n  background-color: var(--grid-sunk-color);\n}\n"],sourceRoot:""}]);const s=i},271:(n,e,t)=>{t.d(e,{A:()=>u});var r=t(441),o=t.n(r),a=t(359),i=t.n(a),s=t(758),l=t.n(s),c=new URL(t(324),t.b),A=i()(o()),d=l()(c);A.push([n.id,`@font-face {\n  font-family: 'Abel';\n  src: url(${d}) format('truetype');\n}\n\n:root {\n  --background-gradient-1: #95498d;\n  --background-gradient-2: #aebbff;\n  --alt-background-gradient-1: #7d3065;\n  --alt-background-gradient-2: #ffaeae;\n  --panel-color: rgba(0, 0, 0, 0.2);\n\n  --grid-color: white;\n  --grid-ship-color: white;\n  --grid-miss-color: rgba(0, 0, 0, 0.5);\n  --grid-hit-color: rgba(255, 0, 0, 0.5);\n  --grid-sunk-color: rgba(255, 0, 0, 0.8);\n\n  --text-color: white;\n  --text-color-faded: rgba(255, 255, 255, 0.5);\n\n  --button-background-color: transparent;\n  --button-line-color: white;\n\n  font-family: 'Abel', sans-serif;\n}\n\ninput,\nselect,\ntextarea,\nbutton {\n  font-family: inherit;\n  color: inherit;\n  font-size: 1rem;\n}\n\n.drop-shadow-text {\n  text-shadow: 0px 2px 3px rgba(0, 0, 0, 0.32);\n}\n\n::selection {\n  background-color: var(--panel-color);\n}\n\n.hidden {\n  display: none;\n}\n\n.selectable:after,\nbutton:after {\n  content: '';\n  display: block;\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n\n.selectable:hover:after {\n  background-color: rgba(255, 255, 255, 0.5);\n}\n\nbutton:hover:after {\n  background-color: rgba(255, 255, 255, 0.25);\n}\n\n.selectable:active:after,\nbutton:active:after {\n  background-color: rgba(0, 0, 0, 0.2);\n}\n\nbutton {\n  padding: 5px 15px;\n  background-color: transparent;\n  border: 4px solid var(--button-line-color);\n  border-bottom: 8px solid var(--button-line-color);\n  color: var(--button-line-color);\n  font-size: 1.8rem;\n  position: relative;\n  cursor: pointer;\n}\n\nbutton:active {\n  border-bottom: 4px solid var(--button-line-color);\n  border-top: 8px solid var(--button-line-color);\n}\n`,"",{version:3,sources:["webpack://./src/style/global.css"],names:[],mappings:"AAAA;EACE,mBAAmB;EACnB,+DAAwD;AAC1D;;AAEA;EACE,gCAAgC;EAChC,gCAAgC;EAChC,oCAAoC;EACpC,oCAAoC;EACpC,iCAAiC;;EAEjC,mBAAmB;EACnB,wBAAwB;EACxB,qCAAqC;EACrC,sCAAsC;EACtC,uCAAuC;;EAEvC,mBAAmB;EACnB,4CAA4C;;EAE5C,sCAAsC;EACtC,0BAA0B;;EAE1B,+BAA+B;AACjC;;AAEA;;;;EAIE,oBAAoB;EACpB,cAAc;EACd,eAAe;AACjB;;AAEA;EACE,4CAA4C;AAC9C;;AAEA;EACE,oCAAoC;AACtC;;AAEA;EACE,aAAa;AACf;;AAEA;;EAEE,WAAW;EACX,cAAc;EACd,kBAAkB;EAClB,MAAM;EACN,OAAO;EACP,WAAW;EACX,YAAY;AACd;;AAEA;EACE,0CAA0C;AAC5C;;AAEA;EACE,2CAA2C;AAC7C;;AAEA;;EAEE,oCAAoC;AACtC;;AAEA;EACE,iBAAiB;EACjB,6BAA6B;EAC7B,0CAA0C;EAC1C,iDAAiD;EACjD,+BAA+B;EAC/B,iBAAiB;EACjB,kBAAkB;EAClB,eAAe;AACjB;;AAEA;EACE,iDAAiD;EACjD,8CAA8C;AAChD",sourcesContent:["@font-face {\n  font-family: 'Abel';\n  src: url('../fonts/Abel-Regular.ttf') format('truetype');\n}\n\n:root {\n  --background-gradient-1: #95498d;\n  --background-gradient-2: #aebbff;\n  --alt-background-gradient-1: #7d3065;\n  --alt-background-gradient-2: #ffaeae;\n  --panel-color: rgba(0, 0, 0, 0.2);\n\n  --grid-color: white;\n  --grid-ship-color: white;\n  --grid-miss-color: rgba(0, 0, 0, 0.5);\n  --grid-hit-color: rgba(255, 0, 0, 0.5);\n  --grid-sunk-color: rgba(255, 0, 0, 0.8);\n\n  --text-color: white;\n  --text-color-faded: rgba(255, 255, 255, 0.5);\n\n  --button-background-color: transparent;\n  --button-line-color: white;\n\n  font-family: 'Abel', sans-serif;\n}\n\ninput,\nselect,\ntextarea,\nbutton {\n  font-family: inherit;\n  color: inherit;\n  font-size: 1rem;\n}\n\n.drop-shadow-text {\n  text-shadow: 0px 2px 3px rgba(0, 0, 0, 0.32);\n}\n\n::selection {\n  background-color: var(--panel-color);\n}\n\n.hidden {\n  display: none;\n}\n\n.selectable:after,\nbutton:after {\n  content: '';\n  display: block;\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n\n.selectable:hover:after {\n  background-color: rgba(255, 255, 255, 0.5);\n}\n\nbutton:hover:after {\n  background-color: rgba(255, 255, 255, 0.25);\n}\n\n.selectable:active:after,\nbutton:active:after {\n  background-color: rgba(0, 0, 0, 0.2);\n}\n\nbutton {\n  padding: 5px 15px;\n  background-color: transparent;\n  border: 4px solid var(--button-line-color);\n  border-bottom: 8px solid var(--button-line-color);\n  color: var(--button-line-color);\n  font-size: 1.8rem;\n  position: relative;\n  cursor: pointer;\n}\n\nbutton:active {\n  border-bottom: 4px solid var(--button-line-color);\n  border-top: 8px solid var(--button-line-color);\n}\n"],sourceRoot:""}]);const u=A},532:(n,e,t)=>{t.d(e,{A:()=>s});var r=t(441),o=t.n(r),a=t(359),i=t.n(a)()(o());i.push([n.id,"body {\n  background: linear-gradient(0, var(--background-gradient-1) 0%, var(--background-gradient-2) 100%);\n  color: var(--text-color);\n\n  min-height: 100vh;\n  margin: 0;\n  display: flex;\n}\n\nbody.alt-color {\n  background: linear-gradient(0, var(--alt-background-gradient-1) 0%, var(--alt-background-gradient-2) 100%);\n}\n\n.content-container {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n}\n\n.button-container {\n  margin-top: 20px;\n  display: flex;\n  gap: 20px;\n}\n\n.sidebar {\n  width: 350px;\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  background-color: var(--panel-color);\n}\n\n.title {\n  font-size: 3rem;\n  margin-top: 5px;\n}\n\n.author {\n  font-size: 1.2rem;\n}\n\n.game-log-title {\n  font-size: 2rem;\n  margin-top: 25px;\n}\n\n.game-log {\n  font-size: 1.2rem;\n  background-color: var(--panel-color);\n  align-self: stretch;\n  margin: 10px;\n  padding: 10px;\n  flex: 1;\n  overflow-y: scroll;\n}\n\n.game-log div:not(:last-child) {\n  color: var(--text-color-faded);\n}\n","",{version:3,sources:["webpack://./src/style/layout.css"],names:[],mappings:"AAAA;EACE,kGAAkG;EAClG,wBAAwB;;EAExB,iBAAiB;EACjB,SAAS;EACT,aAAa;AACf;;AAEA;EACE,0GAA0G;AAC5G;;AAEA;EACE,OAAO;EACP,aAAa;EACb,sBAAsB;EACtB,mBAAmB;EACnB,uBAAuB;AACzB;;AAEA;EACE,gBAAgB;EAChB,aAAa;EACb,SAAS;AACX;;AAEA;EACE,YAAY;EACZ,aAAa;EACb,aAAa;EACb,sBAAsB;EACtB,mBAAmB;EACnB,oCAAoC;AACtC;;AAEA;EACE,eAAe;EACf,eAAe;AACjB;;AAEA;EACE,iBAAiB;AACnB;;AAEA;EACE,eAAe;EACf,gBAAgB;AAClB;;AAEA;EACE,iBAAiB;EACjB,oCAAoC;EACpC,mBAAmB;EACnB,YAAY;EACZ,aAAa;EACb,OAAO;EACP,kBAAkB;AACpB;;AAEA;EACE,8BAA8B;AAChC",sourcesContent:["body {\n  background: linear-gradient(0, var(--background-gradient-1) 0%, var(--background-gradient-2) 100%);\n  color: var(--text-color);\n\n  min-height: 100vh;\n  margin: 0;\n  display: flex;\n}\n\nbody.alt-color {\n  background: linear-gradient(0, var(--alt-background-gradient-1) 0%, var(--alt-background-gradient-2) 100%);\n}\n\n.content-container {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n}\n\n.button-container {\n  margin-top: 20px;\n  display: flex;\n  gap: 20px;\n}\n\n.sidebar {\n  width: 350px;\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  background-color: var(--panel-color);\n}\n\n.title {\n  font-size: 3rem;\n  margin-top: 5px;\n}\n\n.author {\n  font-size: 1.2rem;\n}\n\n.game-log-title {\n  font-size: 2rem;\n  margin-top: 25px;\n}\n\n.game-log {\n  font-size: 1.2rem;\n  background-color: var(--panel-color);\n  align-self: stretch;\n  margin: 10px;\n  padding: 10px;\n  flex: 1;\n  overflow-y: scroll;\n}\n\n.game-log div:not(:last-child) {\n  color: var(--text-color-faded);\n}\n"],sourceRoot:""}]);const s=i},359:n=>{n.exports=function(n){var e=[];return e.toString=function(){return this.map((function(e){var t="",r=void 0!==e[5];return e[4]&&(t+="@supports (".concat(e[4],") {")),e[2]&&(t+="@media ".concat(e[2]," {")),r&&(t+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),t+=n(e),r&&(t+="}"),e[2]&&(t+="}"),e[4]&&(t+="}"),t})).join("")},e.i=function(n,t,r,o,a){"string"==typeof n&&(n=[[null,n,void 0]]);var i={};if(r)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(i[l]=!0)}for(var c=0;c<n.length;c++){var A=[].concat(n[c]);r&&i[A[0]]||(void 0!==a&&(void 0===A[5]||(A[1]="@layer".concat(A[5].length>0?" ".concat(A[5]):""," {").concat(A[1],"}")),A[5]=a),t&&(A[2]?(A[1]="@media ".concat(A[2]," {").concat(A[1],"}"),A[2]=t):A[2]=t),o&&(A[4]?(A[1]="@supports (".concat(A[4],") {").concat(A[1],"}"),A[4]=o):A[4]="".concat(o)),e.push(A))}},e}},758:n=>{n.exports=function(n,e){return e||(e={}),n?(n=String(n.__esModule?n.default:n),/^['"].*['"]$/.test(n)&&(n=n.slice(1,-1)),e.hash&&(n+=e.hash),/["'() \t\n]|(%20)/.test(n)||e.needQuotes?'"'.concat(n.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):n):n}},441:n=>{n.exports=function(n){var e=n[1],t=n[3];if(!t)return e;if("function"==typeof btoa){var r=btoa(unescape(encodeURIComponent(JSON.stringify(t)))),o="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),a="/*# ".concat(o," */");return[e].concat([a]).join("\n")}return[e].join("\n")}},153:n=>{var e=[];function t(n){for(var t=-1,r=0;r<e.length;r++)if(e[r].identifier===n){t=r;break}return t}function r(n,r){for(var a={},i=[],s=0;s<n.length;s++){var l=n[s],c=r.base?l[0]+r.base:l[0],A=a[c]||0,d="".concat(c," ").concat(A);a[c]=A+1;var u=t(d),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==u)e[u].references++,e[u].updater(p);else{var h=o(p,r);r.byIndex=s,e.splice(s,0,{identifier:d,updater:h,references:1})}i.push(d)}return i}function o(n,e){var t=e.domAPI(e);return t.update(n),function(e){if(e){if(e.css===n.css&&e.media===n.media&&e.sourceMap===n.sourceMap&&e.supports===n.supports&&e.layer===n.layer)return;t.update(n=e)}else t.remove()}}n.exports=function(n,o){var a=r(n=n||[],o=o||{});return function(n){n=n||[];for(var i=0;i<a.length;i++){var s=t(a[i]);e[s].references--}for(var l=r(n,o),c=0;c<a.length;c++){var A=t(a[c]);0===e[A].references&&(e[A].updater(),e.splice(A,1))}a=l}}},774:n=>{var e={};n.exports=function(n,t){var r=function(n){if(void 0===e[n]){var t=document.querySelector(n);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(n){t=null}e[n]=t}return e[n]}(n);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}},997:n=>{n.exports=function(n){var e=document.createElement("style");return n.setAttributes(e,n.attributes),n.insert(e,n.options),e}},865:(n,e,t)=>{n.exports=function(n){var e=t.nc;e&&n.setAttribute("nonce",e)}},70:n=>{n.exports=function(n){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=n.insertStyleElement(n);return{update:function(t){!function(n,e,t){var r="";t.supports&&(r+="@supports (".concat(t.supports,") {")),t.media&&(r+="@media ".concat(t.media," {"));var o=void 0!==t.layer;o&&(r+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),r+=t.css,o&&(r+="}"),t.media&&(r+="}"),t.supports&&(r+="}");var a=t.sourceMap;a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleTagTransform(r,n,e.options)}(e,n,t)},remove:function(){!function(n){if(null===n.parentNode)return!1;n.parentNode.removeChild(n)}(e)}}}},290:n=>{n.exports=function(n,e){if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}},324:(n,e,t)=>{n.exports=t.p+"3843f456cf56d275baf6.ttf"}},e={};function t(r){var o=e[r];if(void 0!==o)return o.exports;var a=e[r]={id:r,exports:{}};return n[r](a,a.exports,t),a.exports}t.m=n,t.n=n=>{var e=n&&n.__esModule?()=>n.default:()=>n;return t.d(e,{a:e}),e},t.d=(n,e)=>{for(var r in e)t.o(e,r)&&!t.o(n,r)&&Object.defineProperty(n,r,{enumerable:!0,get:e[r]})},t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(n){if("object"==typeof window)return window}}(),t.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),(()=>{var n;t.g.importScripts&&(n=t.g.location+"");var e=t.g.document;if(!n&&e&&(e.currentScript&&(n=e.currentScript.src),!n)){var r=e.getElementsByTagName("script");if(r.length)for(var o=r.length-1;o>-1&&(!n||!/^http(s?):/.test(n));)n=r[o--].src}if(!n)throw new Error("Automatic publicPath is not supported in this browser");n=n.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=n})(),t.b=document.baseURI||self.location.href,t.nc=void 0;var r=t(153),o=t.n(r),a=t(70),i=t.n(a),s=t(774),l=t.n(s),c=t(865),A=t.n(c),d=t(997),u=t.n(d),p=t(290),h=t.n(p),g=t(271),b={};b.styleTagTransform=h(),b.setAttributes=A(),b.insert=l().bind(null,"head"),b.domAPI=i(),b.insertStyleElement=u(),o()(g.A,b),g.A&&g.A.locals&&g.A.locals;var C=t(532),f={};f.styleTagTransform=h(),f.setAttributes=A(),f.insert=l().bind(null,"head"),f.domAPI=i(),f.insertStyleElement=u(),o()(C.A,f),C.A&&C.A.locals&&C.A.locals;var m=t(244),E={};E.styleTagTransform=h(),E.setAttributes=A(),E.insert=l().bind(null,"head"),E.domAPI=i(),E.insertStyleElement=u(),o()(m.A,E),m.A&&m.A.locals&&m.A.locals;const v=class{constructor(n,e){this.width=n,this.height=e,this.grid=[...Array(e)].map((()=>Array(n).fill(null))),this.hitGrid=[...Array(e)].map((()=>Array(n).fill(null))),this.missedGrid=[...Array(e)].map((()=>Array(n).fill(null))),this.ships=[]}at(n,e){return this.grid[e][n]}isInBounds(n,e){return n>=0&&n<this.width&&e>=0&&e<this.height}isShipAtPosition(n,e){return null!==this.at(n,e)}isValidPlacement(n,e,t){if(e[1]-e[0]!=0&&t[1]-t[0]!=0)return!1;if(Math.abs(e[1]-e[0])+Math.abs(t[1]-t[0])!==n.length-1)return!1;for(let n=e[0];n<=t[0];++n)for(let r=e[1];r<=t[1];++r){if(!this.isInBounds(n,r))return!1;if(null!==this.at(n,r))return!1}return!0}placeShip(n,e,t){if(!this.isValidPlacement(n,e,t))throw new Error("Invalid ship placement");this.ships.push(n);for(let r=e[0];r<=t[0];++r)for(let o=e[1];o<=t[1];++o)this.grid[o][r]=n}areAllShipsSunk(){return this.ships.every((n=>n.isSunk()))}hasBeenAttackedBefore(n,e){return!!this.hitGrid[e][n]||!!this.missedGrid[e][n]}receiveAttack(n,e){if(this.hasBeenAttackedBefore(n,e))throw new Error("Position has already been attacked");const t=this.at(n,e);return null===t?(this.missedGrid[e][n]=!0,!1):(t.hit(),this.hitGrid[e][n]=!0,!0)}},B=class{constructor(n){this.board=n}},y=n=>Math.floor(Math.random()*n),k=(n,e)=>{const[t,r]=e;let o=[[t+1,r],[t-1,r],[t,r+1],[t,r-1]];return o=o.filter((e=>n.isInBounds(e[0],e[1])&&!n.hasBeenAttackedBefore(e[0],e[1]))),0===o.length?null:o[y(o.length)]},x=class{constructor(n){this.board=n,this.history=[],this.priorityTargets=[]}getChoice(n){for(;this.priorityTargets.length;){const[e,t]=this.priorityTargets[this.priorityTargets.length-1];if(n.at(e,t).isSunk()){this.priorityTargets.pop();continue}const r=k(n,[e,t]);if(null!==r)return r;this.priorityTargets.pop()}return(n=>{for(;;){const e=y(n.width),t=y(n.height);if(!n.hasBeenAttackedBefore(e,t))return[e,t]}})(n)}recordChoice(n,e){this.history.push(n),e&&!e.isSunk()&&this.priorityTargets.push(n)}},w=class{constructor(n){this.length=n,this.hits=0}hit(){this.hits=Math.min(this.hits+1,this.length)}isSunk(){return this.hits===this.length}getHits(){return this.hits}},_=async n=>new Promise((e=>setTimeout(e,n))),S=(n,e,t,r,o)=>{M(n,e,t,r-1,o,"board__left-connection"),M(n,e,t,r,o-1,"board__up-connection")},M=(n,e,t,r,o,a)=>{if(!t.isInBounds(r,o))return;if(t.at(r,o)!==e)return;const i=document.createElement("div");i.classList.add(a),n.appendChild(i)},R=n=>n.toString().padStart(2,"0"),T=class{constructor(n,e,t=!1){this.onMessageReceived=n,this.onClear=e,this.addTimestamp=t}send(n){if(this.onMessageReceived){if(this.addTimestamp){const e=new Date;let t=`[${R(e.getHours())}:`;t+=`${R(e.getMinutes())}:`,t+=`${R(e.getSeconds())}]`,n=`${t}: ${n}`}this.onMessageReceived(n)}}sendClear(){this.onClear?.()}},L=document.querySelector(".board__banner"),j=new T((n=>{L.textContent=n}),(()=>{L.textContent=""})),z=document.querySelector(".game-log"),P=new T((n=>{const e=document.createElement("div");e.textContent=n,z.appendChild(e),z.scrollTop=z.scrollHeight}),(()=>{for(;z.firstChild;)z.firstChild.remove()}),!0),D=(n,e,t)=>{$.playTurn(e,t)},I=document.querySelector("body"),N=document.querySelector(".board"),$=new class{constructor(n,e,t){this.boardSize=10,this.bannerMessageReceiver=n,this.logMessageReceiver=e,this.player=new B(this.generateRandomBoard()),this.computer=new x(this.generateRandomBoard()),this.state=1,this.onNewBoardDisplayed=t,this.onNewBoardDisplayed?.(this.player.board,1)}start(){this.playersTurn(),this.logMessageReceiver.send("Game started!")}playersTurn(){this.state=2,this.bannerMessageReceiver.send("Your turn!"),this.onNewBoardDisplayed?.(this.computer.board,2)}async enemysTurn(){this.state=1,this.bannerMessageReceiver.send("Computer is thinking..."),this.onNewBoardDisplayed?.(this.player.board,this.state),await _(1e3);const[n,e]=this.computer.getChoice(this.player.board);this.playTurn(n,e),this.computer.recordChoice([n,e],this.player.board.at(n,e))}playerWon(){this.bannerMessageReceiver.send("Victory!"),this.logMessageReceiver.send("Victory!")}playerLost(){this.bannerMessageReceiver.send("Gameover!"),this.logMessageReceiver.send("Gameover!")}async playTurn(n,e){const t=this.getCurrentBoard(),r=t.receiveAttack(n,e),o=t===this.player.board?"Computer":"Player";r?t.at(n,e).isSunk()?(this.bannerMessageReceiver.send("Battleship sunk!"),this.logMessageReceiver.send("Battleship sunk!")):(this.bannerMessageReceiver.send("Hit!"),this.logMessageReceiver.send(`${o} hits: ${n+1}, ${e+1}`)):(this.bannerMessageReceiver.send("Miss!"),this.logMessageReceiver.send(`${o} misses: ${n+1}, ${e+1}`)),2===this.state&&(this.state=3),this.onNewBoardDisplayed?.(t,this.state),await _(1e3),t.areAllShipsSunk()?t===this.player.board?this.playerLost():this.playerWon():3===this.state?this.enemysTurn():this.playersTurn()}reset(){this.state=1,this.computer=new x(this.generateRandomBoard()),this.player=new B(this.generateRandomBoard()),this.onNewBoardDisplayed?.(this.player.board,this.state),this.bannerMessageReceiver.send("Welcome to Battleship!"),this.logMessageReceiver.sendClear()}givePlayerNewBoard(){this.player=new B(this.generateRandomBoard()),this.logMessageReceiver.send("Randomized board!"),this.onNewBoardDisplayed?.(this.player.board,this.state)}generateRandomBoard(){const n=new v(this.boardSize,this.boardSize);return[2,3,3,4,5].forEach((e=>{const t=new w(e),r=((n,e,t=!0)=>{for(;;){const r=y(n.width),o=y(n.height),a=[r,o],i=t?[r+e.length-1,o]:[r,o+e.length-1];if(n.isValidPlacement(e,a,i))return[a,i]}})(n,t,Math.random()>.5);n.placeShip(t,r[0],r[1])})),n}getCurrentBoard(){return 1===this.state?this.player.board:this.computer.board}}(j,P,((n,e)=>{((n,e,t,r)=>{for(;n.firstChild;)n.firstChild.remove();for(let o=0;o<e.width;++o)for(let a=0;a<e.height;++a){const i=document.createElement("div");i.classList.add("board__cell");const s=e.hasBeenAttackedBefore(a,o),l=e.isShipAtPosition(a,o),c=s&&!l,A=s&&l,d=e.at(a,o);c&&i.classList.add("miss"),A&&(d.isSunk()?i.classList.add("sunk"):i.classList.add("hit")),l&&(1===r||d.isSunk())&&(i.classList.add("ship"),S(i,d,e,a,o)),2!==r||s||(i.classList.add("selectable"),i.addEventListener("click",(()=>{t(i,a,o)}))),n.appendChild(i)}})(N,n,D,e),1===e?I.classList.remove("alt-color"):I.classList.add("alt-color")})),G=document.querySelector(".randomize-button");G.addEventListener("click",(()=>{$.givePlayerNewBoard()}));const q=document.querySelector(".start-button");q.addEventListener("click",(()=>{$.start(),O.classList.remove("hidden"),G.classList.add("hidden"),q.classList.add("hidden")}));const O=document.querySelector(".restart-button");O.addEventListener("click",(()=>{$.reset(),O.classList.add("hidden"),G.classList.remove("hidden"),q.classList.remove("hidden")}))})();
//# sourceMappingURL=bundle.js.map